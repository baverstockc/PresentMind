<!-- public/index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Personalized Gift Assistant</title>
  <style>
    body { font-family: Arial, sans-serif; }
    input[type="text"], input[type="number"], textarea, select { width: 100%; padding: 10px; margin-bottom: 10px; }
    button { padding: 10px; }
  </style>
</head>
<body>
  <h1>Personalized Gift Assistant</h1>
  <form id="gift-form">
    <label for="budget">Budget range:</label>
    <input type="number" id="budget" placeholder="Enter your budget range" step="any" min="0">

    <label for="personal-tastes">Personal tastes:</label>
    <input type="text" id="personal-tastes" placeholder="Describe the recipient's personal tastes">

    <label for="allergies">Allergies or dietary restrictions:</label>
    <input type="text" id="allergies" placeholder="Enter any allergies or dietary restrictions">

    <label for="past-gifts">Past gifts and recipient's reaction:</label>
    <input type="text" id="past-gifts" placeholder="Describe past gifts and recipient's reaction">

    <label for="gift-type">Gift type preference:</label>
    <select id="gift-type">
      <option value="experiences">Experiences</option>
      <option value="physical">Physical Items</option>
      <option value="sentimental">Sentimental Gifts</option>
    </select>

    <label for="relationship">Relationship:</label>
    <input type="text" id="relationship" placeholder="Describe your relationship with the recipient">

    <label for="special-memories">Special memories or shared experiences:</label>
    <textarea id="special-memories" rows="4" placeholder="Enter special memories or shared experiences"></textarea>

    <label for="delivery-method">Delivery method:</label>
    <select id="delivery-method">
      <option value="in-person">In-person</option>
      <option value="mail">By mail</option>
      <option value="surprise">As a surprise</option>
    </select>

    <label for="current-needs">Recipient's current needs or desires:</label>
    <input type="text" id="current-needs" placeholder="Enter any specific needs or desires">

    <label for="time-constraints">Time constraints:</label>
    <input type="text" id="time-constraints" placeholder="Enter your timeframe for purchasing the gift">

    <button type="submit">Find Gift Ideas</button>
  </form>
  <div id="gift-suggestions"></div>

  <script>
    const giftForm = document.getElementById('gift-form');
    const giftSuggestions = document.getElementById('gift-suggestions');

    giftForm.addEventListener('submit', async (e) => {
      e.preventDefault();

      const formData = {
        budget: document.getElementById('budget').value,
        personalTastes: document.getElementById('personal-tastes').value,
        allergies: document.getElementById('allergies').value,
        pastGifts: document.getElementById('past-gifts').value,
        giftType: document.getElementById('gift-type').value,
        relationship: document.getElementById('relationship').value,
        specialMemories: document.getElementById('special-memories').value,
        deliveryMethod: document.getElementById('delivery-method').value,
        currentNeeds: document.getElementById('current-needs').value,
        timeConstraints: document.getElementById('time-constraints').value,
        };

        const message = `I am looking for a gift with the following details: 
        Budget: ${formData.budget}
        Personal tastes: ${formData.personalTastes}
        Allergies or dietary restrictions: ${formData.allergies}
        Past gifts and reactions: ${formData.pastGifts}
        Gift type preference: ${formData.giftType}
        Relationship: ${formData.relationship}
        Special memories: ${formData.specialMemories}
        Delivery method: ${formData.deliveryMethod}
        Current needs or desires: ${formData.currentNeeds}
        Time constraints: ${formData.timeConstraints}`;

        try {
        const response = await fetch('/ask', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ question: message }),
        });

        const data = await response.json();
        giftSuggestions.innerHTML = `<p><strong>AI Suggestions:</strong><br> ${data.answer.replace(/\n/g, '<br>')}</p>`;
        } catch (error) {
        console.error(error);
        giftSuggestions.innerHTML = '<p><strong>Error:</strong> Something went wrong.</p>';
        }
        });
    </script>
  </body>
  </html>
